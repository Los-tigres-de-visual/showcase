<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Juego de la Serpiente en 3D # Introducción # En el campo de la programación de videojuegos, la creación de juegos clásicos sigue siendo una práctica común para desarrolladores y entusiastas. En este contexto, el presente código representa la implementación de un emocionante juego de la Serpiente en un entorno 3D, utilizando el framework p5.js.
La serpiente, representada por una línea continua en movimiento, se desliza a través de un plano tridimensional en busca de su alimento."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Juego de la Serpiente en 3D # Introducción # En el campo de la programación de videojuegos, la creación de juegos clásicos sigue siendo una práctica común para desarrolladores y entusiastas. En este contexto, el presente código representa la implementación de un emocionante juego de la Serpiente en un entorno 3D, utilizando el framework p5.js.
La serpiente, representada por una línea continua en movimiento, se desliza a través de un plano tridimensional en busca de su alimento."><meta property="og:type" content="article"><meta property="og:url" content="https://Los-tigres-de-visual.github.io/showcase/docs/shortcodes/segundoTaller/3dSnakeGame/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-06-07T15:17:18-05:00"><title>3d Snake Game | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><input type=checkbox id=section-d96370ef8a3bf718e7e4d1e715621ce1 class=toggle>
<label for=section-d96370ef8a3bf718e7e4d1e715621ce1 class="flex justify-between"><a href=/showcase/docs/shortcodes/members/>Members</a></label><ul><li><a href=/showcase/docs/shortcodes/members/JohanLemus/>Johan Lemus</a></li><li><a href=/showcase/docs/shortcodes/members/SantiagoRodriguez/>Santiago Rodriguez</a></li><li><a href=/showcase/docs/shortcodes/members/YuliBeltran/>Yuli Beltran</a></li></ul></li><li><input type=checkbox id=section-f974aa27370ea0ead0fb9e6d0f328eef class=toggle>
<label for=section-f974aa27370ea0ead0fb9e6d0f328eef class="flex justify-between"><a href=/showcase/docs/shortcodes/primerTaller/>Primer Taller</a></label><ul><li><a href=/showcase/docs/shortcodes/primerTaller/colorBlindFilter/>Color Blind Filter</a></li><li><a href=/showcase/docs/shortcodes/primerTaller/colorModels/>Color Models</a></li><li><a href=/showcase/docs/shortcodes/primerTaller/depthPerception/>Depth Perception</a></li></ul></li><li><a href=/showcase/docs/shortcodes/segundoTaller/>Segundo Taller</a><ul><li><a href=/showcase/docs/shortcodes/segundoTaller/3dSnakeGame/ class=active>3d Snake Game</a></li><li><a href=/showcase/docs/shortcodes/segundoTaller/art3d/>Art3d</a></li><li><a href=/showcase/docs/shortcodes/segundoTaller/asciiArt/>Ascii Art</a></li><li><a href=/showcase/docs/shortcodes/segundoTaller/proceduralTexturing/>Procedural Texturing</a></li><li><a href=/showcase/docs/shortcodes/segundoTaller/spatialCoherence/>Spatial Coherence</a></li></ul></li><li><input type=checkbox id=section-ec67a64aba70b9df3d2a9acd6c92e3bc class=toggle>
<label for=section-ec67a64aba70b9df3d2a9acd6c92e3bc class="flex justify-between"><a href=/showcase/docs/shortcodes/p5/>P5</a></label><ul><li><a href=/showcase/docs/shortcodes/p5/iframe/>Iframe</a></li><li><a href=/showcase/docs/shortcodes/p5/div/>Div</a></li></ul></li><li><input type=checkbox id=section-b7e502266b7d64b7b7d2f21d0cc1b8be class=toggle>
<label for=section-b7e502266b7d64b7b7d2f21d0cc1b8be class="flex justify-between"><a role=button>Secciones Base</a></label><ul><li><a href=/showcase/docs/shortcodes/seccionesBase/buttons/>Buttons</a></li><li><a href=/showcase/docs/shortcodes/seccionesBase/columns/>Columns</a></li><li><a href=/showcase/docs/shortcodes/seccionesBase/details/>Details</a></li><li><a href=/showcase/docs/shortcodes/seccionesBase/hints/>Hints</a></li><li><a href=/showcase/docs/shortcodes/seccionesBase/katex/>Katex</a></li><li><a href=/showcase/docs/shortcodes/seccionesBase/mermaid/>Mermaid</a></li><li><a href=/showcase/docs/shortcodes/seccionesBase/tabs/>Tabs</a></li></ul></li></ul></li></ul><ul><li><a href=/showcase/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>3d Snake Game</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#juego-de-la-serpiente-en-3d>Juego de la Serpiente en 3D</a><ul><li><a href=#introducción>Introducción</a></li><li><a href=#antecedentes-y-trabajo-previo>Antecedentes y Trabajo Previo</a></li><li><a href=#juego-de-la-serpiente>Juego de la Serpiente</a></li><li><a href=#código-y-explicación>Código y Explicación</a><ul><li><a href=#archivo-sketchjs>Archivo Sketch.js</a></li><li><a href=#archivo-snakejs>Archivo Snake.js</a></li><li><a href=#archivo-foodjs>Archivo Food.js</a></li></ul></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#trabajo-futuro>Trabajo Futuro</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=juego-de-la-serpiente-en-3d>Juego de la Serpiente en 3D
<a class=anchor href=#juego-de-la-serpiente-en-3d>#</a></h1><h2 id=introducción>Introducción
<a class=anchor href=#introducci%c3%b3n>#</a></h2><p>En el campo de la programación de videojuegos, la creación de juegos clásicos sigue siendo una práctica común para desarrolladores y entusiastas. En este contexto, el presente código representa la implementación de un emocionante juego de la Serpiente en un entorno 3D, utilizando el framework <code>p5.js</code>.</p><p>La serpiente, representada por una línea continua en movimiento, se desliza a través de un plano tridimensional en busca de su alimento. El objetivo del juego es controlar hábilmente la dirección de la serpiente para que pueda consumir los alimentos generados aleatoriamente, lo que a su vez aumenta la longitud de la serpiente. Sin embargo, el desafío radica en evitar colisionar con los bordes del plano o chocar contra sí misma, ya que esto resultaría en el fin del juego.</p><p>La representación visual del juego se ha mejorado significativamente gracias al entorno 3D creado con <code>p5.js</code>. Mediante el uso de transformaciones y cámara, el plano de juego se despliega en una perspectiva tridimensional, ofreciendo una sensación de profundidad y realismo. Además, se han aplicado efectos de iluminación y sombreado para resaltar la serpiente y el alimento, lo que añade un aspecto visual atractivo al juego.</p><h2 id=antecedentes-y-trabajo-previo>Antecedentes y Trabajo Previo
<a class=anchor href=#antecedentes-y-trabajo-previo>#</a></h2><p>A lo largo de los años, el juego de la Serpiente ha sido objeto de diversas reinterpretaciones y mejoras, tanto en términos de gráficos como de mecánicas de juego. En su forma original, el jugador controlaba una serpiente en un plano bidimensional, tratando de recolectar alimentos mientras evitaba colisionar con las paredes del entorno o con su propio cuerpo.</p><p>En el ámbito de la programación de videojuegos, el desarrollo de versiones personalizadas y adaptaciones de la Serpiente ha sido una práctica común y una manera popular de aprender conceptos de programación y lógica de juego. Los lenguajes de programación y las bibliotecas gráficas han evolucionado, brindando a los desarrolladores herramientas más potentes para crear experiencias de juego visualmente impresionantes y envolventes.</p><p>Por otro lado, hay numerosos trabajos han abordado la implementación y mejora del juego de la Serpiente, explorando diversas tecnologías y enfoques para ofrecer una experiencia única a los jugadores. Estos trabajos previos han contribuido a la evolución del juego de la Serpiente, aportando mejoras tanto en términos de experiencia visual como de interacción con el jugador. Han demostrado la versatilidad del juego y han servido como base para la implementación de nuevas versiones y adaptaciones, como la que se presenta en el código actual utilizando p5.js.</p><h2 id=juego-de-la-serpiente>Juego de la Serpiente
<a class=anchor href=#juego-de-la-serpiente>#</a></h2><p><img src=/showcase/sketches/gifSerpiente.gif alt><blockquote class="book-hint info">Para ofrecer una mejor visualización del juego, se desplegó en Github una versión estática del juego, en vez de usar un iframe-p5. Para visitar y probar el juego se debe ir a la siguiente página. <a href=https://johan15111.github.io/snake3d/ target=_blank>Página del Juego</a></blockquote></p><blockquote class="book-hint warning"><strong>Derechos de Autor</strong><br>Este código fue inspirado en el video <a href="https://www.youtube.com/watch?v=OMoVcohRgZA" target=_blank>The-Coding-Train Snake-Redux Video</a>, el cual presenta una versión en 2D. Posteriormente <a href=https://github.com/Milchreis target=_blank>Milchreis</a> realizó una adaptación en 3D del juego, la cual se tomó como base para esta presentación, esto atendiendo a la licencia <strong>GNU General Public License v3.0</strong></blockquote><ol><li><p>Para jugar este juego se deben usar las flechas del teclado para manejar la serpiente. Las reglas son las mismas del juego original, si la serpiente se choca con una pared o alguna parte de ella misma pierdes.</p></li><li><p>En la esquina superior izquierda hay un botón para habilitar o silenciar la música de fondo.</p></li><li><p>Por último, moviendo el mouse de arriba abajo, se puede tener una vista distinta del plano de juego.</p></li></ol><h2 id=código-y-explicación>Código y Explicación
<a class=anchor href=#c%c3%b3digo-y-explicaci%c3%b3n>#</a></h2><p>A continuación, presentamos el código utilizado para esta implementación. En este caso, se crearon 3 archivos distintos, el archivo principal <code>sketches.js</code>, el archivo con la clase <code>Snake</code> y el archivo con la clase <code>Food</code>.
<details><summary>sketch.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>snake</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>food</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>blockSize</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>planeSize</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>angle</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>font</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>fontsize</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>40</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>message</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>textColor1</span>, <span style=color:#a6e22e>textColor2</span>, <span style=color:#a6e22e>textColor3</span>, <span style=color:#a6e22e>textColor4</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>backgroundMusic</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>eatingEffect</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rightEffect</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>leftEffect</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>upEffect</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>downEffect</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>isAudioPlaying</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>iconImage</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>score</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>font</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadFont</span>(<span style=color:#e6db74>&#39;font/Boba.ttf&#39;</span>); <span style=color:#75715e>// Carga la fuente de texto personalizada
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>backgroundMusic</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadSound</span>(<span style=color:#e6db74>&#39;music/background.mp3&#39;</span>); <span style=color:#75715e>// Carga la música de fondo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>eatingEffect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadSound</span>(<span style=color:#e6db74>&#39;music/eating.wav&#39;</span>); <span style=color:#75715e>// Carga el efecto de sonido de comer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>rightEffect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadSound</span>(<span style=color:#e6db74>&#39;music/right.mp3&#39;</span>); <span style=color:#75715e>// Carga el efecto de sonido de moverse a la derecha
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>leftEffect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadSound</span>(<span style=color:#e6db74>&#39;music/left.mp3&#39;</span>); <span style=color:#75715e>// Carga el efecto de sonido de moverse a la izquierda
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>upEffect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadSound</span>(<span style=color:#e6db74>&#39;music/up.mp3&#39;</span>); <span style=color:#75715e>// Carga el efecto de sonido de moverse hacia arriba
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>downEffect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadSound</span>(<span style=color:#e6db74>&#39;music/down.mp3&#39;</span>); <span style=color:#75715e>// Carga el efecto de sonido de moverse hacia abajo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#a6e22e>windowWidth</span>, <span style=color:#a6e22e>windowHeight</span>, <span style=color:#a6e22e>WEBGL</span>); <span style=color:#75715e>// Crea el lienzo de juego en 3D
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>angleMode</span>(<span style=color:#a6e22e>DEGREES</span>); <span style=color:#75715e>// Cambia el modo de ángulo a grados
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>backgroundMusic</span>.<span style=color:#a6e22e>stop</span>(); <span style=color:#75715e>// Detiene la reproducción de la música de fondo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textColor1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>); <span style=color:#75715e>// Define el color de texto 1 (rojo)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>textColor2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>); <span style=color:#75715e>// Define el color de texto 2 (azul)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>textColor3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>); <span style=color:#75715e>// Define el color de texto 3 (negro)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>textColor4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>245</span>, <span style=color:#ae81ff>130</span>, <span style=color:#ae81ff>27</span>) <span style=color:#75715e>// Define el color de texto 4 (naranja)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blockSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>windowWidth</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.04</span>; <span style=color:#75715e>// Calcula el tamaño de los bloques del juego en función del ancho de la ventana
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>planeSize</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>windowWidth</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>windowHeight</span>
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>restartGame</span>(); <span style=color:#75715e>// Reinicia el juego y establece los valores iniciales
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setAttributes</span>(<span style=color:#e6db74>&#39;antialias&#39;</span>, <span style=color:#66d9ef>true</span>); <span style=color:#75715e>// Activa el antialiasing para mejorar la calidad visual
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textFont</span>(<span style=color:#a6e22e>font</span>); <span style=color:#75715e>// Establece la fuente de texto
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>textSize</span>(<span style=color:#a6e22e>fontsize</span>); <span style=color:#75715e>// Establece el tamaño de fuente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>textAlign</span>(<span style=color:#a6e22e>CENTER</span>, <span style=color:#a6e22e>CENTER</span>); <span style=color:#75715e>// Establece la alineación del texto en el centro
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>hammer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Hammer</span>(document.<span style=color:#a6e22e>body</span>, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>preventDefault</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hammer</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;swipe&#39;</span>).<span style=color:#a6e22e>set</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>direction</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Hammer</span>.<span style=color:#a6e22e>DIRECTION_ALL</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hammer</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#34;swipe&#34;</span>, <span style=color:#a6e22e>keyPressed</span>); <span style=color:#75715e>// Asigna la función keyPressed al evento de deslizamiento (swipe) del Hammer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>audioButton</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createButton</span>(<span style=color:#e6db74>&#39;&#39;</span>); <span style=color:#75715e>// Crea un botón de audio vacío
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>audioButton</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>20</span>); <span style=color:#75715e>// Establece la posición del botón en la ventana
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>iconImage</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createImg</span>(<span style=color:#e6db74>&#39;music/HabilitarAudio.png&#39;</span>); <span style=color:#75715e>// Crea una imagen para el ícono del botón de audio
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>iconImage</span>.<span style=color:#a6e22e>size</span>(<span style=color:#ae81ff>24</span>, <span style=color:#ae81ff>24</span>); <span style=color:#75715e>// Establece el tamaño de la imagen
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>audioButton</span>.<span style=color:#a6e22e>elt</span>.<span style=color:#a6e22e>appendChild</span>(<span style=color:#a6e22e>iconImage</span>.<span style=color:#a6e22e>elt</span>); <span style=color:#75715e>// Agrega la imagen al botón
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>audioButton</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>toggleAudio</span>); <span style=color:#75715e>// Asigna la función toggleAudio al evento de clic del botón
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>restartGame</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>; <span style=color:#75715e>// Reinicia el estado del juego a &#34;no terminado&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>score</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#75715e>// Reinicia el puntaje a -1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>snake</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Snake</span>(<span style=color:#a6e22e>windowWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>windowHeight</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>blockSize</span>); <span style=color:#75715e>// Crea una nueva serpiente en el centro de la ventana
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>food</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createFood</span>(); <span style=color:#75715e>// Crea una nueva comida en una posición aleatoria
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>138</span>, <span style=color:#ae81ff>223</span>, <span style=color:#ae81ff>253</span> ); <span style=color:#75715e>// Establece el color de fondo del lienzo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>translate</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>windowWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>windowHeight</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>); <span style=color:#75715e>// Translada el origen al centro de la ventana
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>angle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>mouseY</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>windowWidth</span>, <span style=color:#a6e22e>windowHeight</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.7</span>); <span style=color:#75715e>// Calcula el ángulo de la cámara en función de la posición vertical del mouse
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>camera</span>(
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>angle</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>min</span>(<span style=color:#a6e22e>windowWidth</span>, <span style=color:#a6e22e>windowHeight</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.8</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>); <span style=color:#75715e>// Establece la posición y orientación de la cámara
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pointLight</span>(<span style=color:#ae81ff>250</span>, <span style=color:#ae81ff>250</span>, <span style=color:#ae81ff>250</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1000</span>, <span style=color:#ae81ff>0</span>); <span style=color:#75715e>// Agrega una fuente de luz puntual al escenario
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Dibuja el plano del juego
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>push</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>190</span>, <span style=color:#ae81ff>253</span>, <span style=color:#ae81ff>138</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>windowWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>windowHeight</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plane</span>(<span style=color:#a6e22e>planeSize</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>planeSize</span>.<span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>textColor4</span>); <span style=color:#75715e>// Establece el color de relleno para el texto
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>translate</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>80</span>); <span style=color:#75715e>// Translada el texto en el eje Z para que esté en frente del plano del juego
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>`Puntaje: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>score</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>600</span>); <span style=color:#75715e>// Muestra el puntaje en la parte superior de la ventana
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>update</span>(); <span style=color:#75715e>// Actualiza la posición de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>update</span>(); <span style=color:#75715e>// Actualiza la posición de la comida
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>isEating</span>(<span style=color:#a6e22e>food</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>grow</span>(); <span style=color:#75715e>// Hace crecer a la serpiente cuando come la comida
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>food</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createFood</span>(); <span style=color:#75715e>// Crea una nueva comida
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>render</span>(); <span style=color:#75715e>// Dibuja la serpiente en el lienzo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>render</span>(); <span style=color:#75715e>// Dibuja la comida en el lienzo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>checkGameOver</span>(); <span style=color:#75715e>// Verifica si el juego ha terminado
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>keyPressed</span>(<span style=color:#a6e22e>event</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>event</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>keyCode</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>LEFT_ARROW</span> <span style=color:#f92672>||</span> (<span style=color:#a6e22e>event</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>direction</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>moveLeft</span>(); <span style=color:#75715e>// Mueve la serpiente hacia la izquierda
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>leftEffect</span>.<span style=color:#a6e22e>play</span>(); <span style=color:#75715e>// Reproduce el efecto de sonido de moverse a la izquierda
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>keyCode</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>RIGHT_ARROW</span> <span style=color:#f92672>||</span> (<span style=color:#a6e22e>event</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>direction</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>moveRight</span>(); <span style=color:#75715e>// Mueve la serpiente hacia la derecha
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>rightEffect</span>.<span style=color:#a6e22e>play</span>(); <span style=color:#75715e>// Reproduce el efecto de sonido de moverse a la derecha
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>keyCode</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>UP_ARROW</span> <span style=color:#f92672>||</span> (<span style=color:#a6e22e>event</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>direction</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>8</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>moveUp</span>(); <span style=color:#75715e>// Mueve la serpiente hacia arriba
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>upEffect</span>.<span style=color:#a6e22e>play</span>(); <span style=color:#75715e>// Reproduce el efecto de sonido de moverse hacia arriba
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>keyCode</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>DOWN_ARROW</span> <span style=color:#f92672>||</span> (<span style=color:#a6e22e>event</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>direction</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>16</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>moveDown</span>(); <span style=color:#75715e>// Mueve la serpiente hacia abajo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>downEffect</span>.<span style=color:#a6e22e>play</span>(); <span style=color:#75715e>// Reproduce el efecto de sonido de moverse hacia abajo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createFood</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newFood</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Food</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>random</span>(<span style=color:#a6e22e>planeSize</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.2</span>, <span style=color:#a6e22e>planeSize</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.8</span>),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>random</span>(<span style=color:#a6e22e>planeSize</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.2</span>, <span style=color:#a6e22e>planeSize</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.8</span>),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>blockSize</span>); <span style=color:#75715e>// Crea una nueva comida en una posición aleatoria dentro del plano del juego
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>eatingEffect</span>.<span style=color:#a6e22e>play</span>(); <span style=color:#75715e>// Reproduce el efecto de sonido de comer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Ajusta la posición de la comida a la cuadrícula
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>newFood</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>newFood</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>/</span> (<span style=color:#a6e22e>blockSize</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>spacing</span>)) <span style=color:#f92672>*</span> (<span style=color:#a6e22e>blockSize</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>spacing</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>newFood</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>newFood</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>/</span> (<span style=color:#a6e22e>blockSize</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>spacing</span>)) <span style=color:#f92672>*</span> (<span style=color:#a6e22e>blockSize</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>spacing</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>score</span><span style=color:#f92672>++</span>; <span style=color:#75715e>// Aumenta el puntaje en 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>isInBody</span>(<span style=color:#a6e22e>newFood</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>newFood</span>.<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>newFood</span>.<span style=color:#a6e22e>size</span>)){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createFood</span>(); <span style=color:#75715e>// Si la comida está dentro del cuerpo de la serpiente, vuelve a crear la comida en una nueva posición
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>newFood</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>checkGameOver</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>getHead</span>(); <span style=color:#75715e>// Obtiene la posición de la cabeza de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Verifica si la cabeza de la serpiente está fuera del plano del juego o choca con su propio cuerpo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>blockSize</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>planeSize</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>blockSize</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>||</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>blockSize</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>planeSize</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>blockSize</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>||</span> <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>isInBody</span>(<span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>size</span>)) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>isGameOver</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>// Establece el estado del juego a &#34;terminado&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>snake</span>.<span style=color:#a6e22e>stop</span>(); <span style=color:#75715e>// Detiene el movimiento de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>backgroundMusic</span>.<span style=color:#a6e22e>stop</span>(); <span style=color:#75715e>// Detiene la reproducción de la música de fondo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>10</span>); <span style=color:#75715e>// Establece el color de relleno en negro
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>80</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>textColor1</span>); <span style=color:#75715e>// Establece el color de texto 1 (rojo)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>`Fin del Juego :(`</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>); <span style=color:#75715e>// Muestra un mensaje de &#34;Fin del Juego&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>textColor2</span>); <span style=color:#75715e>// Establece el color de texto 2 (azul)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>`Tu Puntaje: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>score</span><span style=color:#e6db74>}</span><span style=color:#e6db74> manzanas`</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>60</span>); <span style=color:#75715e>// Muestra el puntaje obtenido
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>textColor3</span>); <span style=color:#75715e>// Establece el color de texto 3 (negro)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>`Da clic para reiniciar el juego`</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>120</span>); <span style=color:#75715e>// Muestra un mensaje para reiniciar el juego
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mousePressed</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isGameOver</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>backgroundMusic</span>.<span style=color:#a6e22e>stop</span>(); <span style=color:#75715e>// Detiene la reproducción de la música de fondo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>isAudioPlaying</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>; <span style=color:#75715e>// Establece el estado de reproducción de audio a &#34;no reproduciendo&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>iconImage</span>.<span style=color:#a6e22e>attribute</span>(<span style=color:#e6db74>&#39;src&#39;</span>, <span style=color:#e6db74>&#39;music/HabilitarAudio.png&#39;</span>); <span style=color:#75715e>// Cambia la imagen del ícono del botón de audio
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>restartGame</span>(); <span style=color:#75715e>// Reinicia el juego
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>toggleAudio</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isAudioPlaying</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>backgroundMusic</span>.<span style=color:#a6e22e>stop</span>(); <span style=color:#75715e>// Detiene la reproducción de la música de fondo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>isAudioPlaying</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>; <span style=color:#75715e>// Establece el estado de reproducción de audio a &#34;no reproduciendo&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>iconImage</span>.<span style=color:#a6e22e>attribute</span>(<span style=color:#e6db74>&#39;src&#39;</span>, <span style=color:#e6db74>&#39;music/HabilitarAudio.png&#39;</span>); <span style=color:#75715e>// Cambia la imagen del ícono del botón de audio
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>backgroundMusic</span>.<span style=color:#a6e22e>loop</span>(); <span style=color:#75715e>// Reproduce la música de fondo en bucle
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>isAudioPlaying</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>// Establece el estado de reproducción de audio a &#34;reproduciendo&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>iconImage</span>.<span style=color:#a6e22e>attribute</span>(<span style=color:#e6db74>&#39;src&#39;</span>, <span style=color:#e6db74>&#39;music/SilenciarAudio.png&#39;</span>); <span style=color:#75715e>// Cambia la imagen del ícono del botón de audio
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details></p><details><summary>Snake.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Snake</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>size</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span> <span style=color:#f92672>=</span> []; <span style=color:#75715e>// Cuerpo de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>size</span> <span style=color:#f92672>||</span> <span style=color:#ae81ff>10</span>; <span style=color:#75715e>// Tamaño de cada segmento de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>; <span style=color:#75715e>// Espacio entre cada segmento de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// Dirección horizontal de movimiento (-1: izquierda, 0: sin movimiento, 1: derecha)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// Dirección vertical de movimiento (-1: arriba, 0: sin movimiento, 1: abajo)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>slowness</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>13</span>; <span style=color:#75715e>// Velocidad de movimiento de la serpiente (número mayor = más lenta)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>allowMoving</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>// Indicador de si se permite el movimiento de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Ajustar a la cuadrícula
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>x</span> <span style=color:#f92672>/</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span>)) <span style=color:#f92672>*</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>y</span> <span style=color:#f92672>/</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span>)) <span style=color:#f92672>*</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#ae81ff>0</span>)); <span style=color:#75715e>// Agregar la cabeza de la serpiente al cuerpo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>moveLeft</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#75715e>// Cambiar la dirección de movimiento hacia la izquierda
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>moveRight</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#75715e>// Cambiar la dirección de movimiento hacia la derecha
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>moveUp</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#75715e>// Cambiar la dirección de movimiento hacia arriba
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>moveDown</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#75715e>// Cambiar la dirección de movimiento hacia abajo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>length</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>length</span>; <span style=color:#75715e>// Devuelve la longitud actual del cuerpo de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grow</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getHead</span>(); <span style=color:#75715e>// Obtener la posición de la cabeza de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// Agregar un nuevo segmento al cuerpo de la serpiente en la dirección actual de movimiento
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>push</span>(
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>createVector</span>(
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span>) <span style=color:#f92672>+</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span>),
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span>) <span style=color:#f92672>+</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span>),
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>slowness</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>slowness</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>, <span style=color:#ae81ff>1</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>slowness</span>); <span style=color:#75715e>// Reducir la velocidad de la serpiente (hacerla más rápida)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>isEating</span>(<span style=color:#a6e22e>food</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dist</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getDistance</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getHead</span>(), <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>food</span>.<span style=color:#a6e22e>size</span>); <span style=color:#75715e>// Calcular la distancia entre la cabeza de la serpiente y la comida
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>dist</span> <span style=color:#f92672>&lt;=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>; <span style=color:#75715e>// Devolver verdadero si la distancia es menor o igual a la mitad del tamaño de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>isInBody</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>size</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dist</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getDistance</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>[<span style=color:#a6e22e>i</span>], <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>size</span>); <span style=color:#75715e>// Calcular la distancia entre un segmento del cuerpo de la serpiente y una posición dada
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>dist</span> <span style=color:#f92672>&lt;=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>// Devolver verdadero si la distancia es menor o igual a la mitad del tamaño de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>; <span style=color:#75715e>// Devolver falso si no se encuentra ninguna coincidencia
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>move</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getHead</span>(); <span style=color:#75715e>// Obtener la posición de la cabeza de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// Agregar un nuevo segmento al cuerpo de la serpiente en la dirección actual de movimiento
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>push</span>(
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>createVector</span>(
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span>) <span style=color:#f92672>+</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xdir</span>),
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span>) <span style=color:#f92672>+</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>spacing</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ydir</span>),
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>shift</span>(); <span style=color:#75715e>// Eliminar el segmento más antiguo del cuerpo de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>getHead</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]; <span style=color:#75715e>// Devolver la posición de la cabeza de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>getTail</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>[<span style=color:#ae81ff>0</span>]; <span style=color:#75715e>// Devolver la posición de la cola de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>getDistance</span>(<span style=color:#a6e22e>element</span>, <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>size</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Calcular la distancia entre un punto dado y un elemento (segmento de la serpiente o comida)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>abs</span>((<span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>-</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>size</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>abs</span>((<span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>-</span> (<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>size</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stop</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>allowMoving</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>; <span style=color:#75715e>// Detener el movimiento de la serpiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>update</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Actualizar el movimiento de la serpiente (llamar a esta función en cada fotograma)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>allowMoving</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>%</span> <span style=color:#a6e22e>floor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>slowness</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>move</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>noStroke</span>(); <span style=color:#75715e>// Sin bordes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>ambientLight</span>(<span style=color:#ae81ff>100</span>); <span style=color:#75715e>// Luz ambiental
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Renderizar la cabeza de la serpiente en color rojo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>head</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getHead</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>head</span>.<span style=color:#a6e22e>y</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ambientMaterial</span>(<span style=color:#ae81ff>253</span>, <span style=color:#ae81ff>86</span>, <span style=color:#ae81ff>106</span>); <span style=color:#75715e>// Material en color rojo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>box</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Renderizar el resto del cuerpo de la serpiente en color negro
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>ambientMaterial</span>(<span style=color:#ae81ff>0</span>); <span style=color:#75715e>// Material en color negro
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>bodyPart</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>body</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>bodyPart</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>bodyPart</span>.<span style=color:#a6e22e>y</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>box</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><details><summary>Food.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Food</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>size</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>x</span>; <span style=color:#75715e>// Coordenada x de la posición de la comida
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>y</span>; <span style=color:#75715e>// Coordenada y de la posición de la comida
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>size</span> <span style=color:#f92672>||</span> <span style=color:#ae81ff>10</span>; <span style=color:#75715e>// Tamaño de la comida (valor predeterminado: 10)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>128</span>, <span style=color:#ae81ff>255</span>); <span style=color:#75715e>// Color de la comida (azul)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>update</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Actualización de la comida (no realiza ninguna acción en este caso)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>render</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>noStroke</span>(); <span style=color:#75715e>// Sin bordes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>ambientLight</span>(<span style=color:#ae81ff>100</span>); <span style=color:#75715e>// Luz ambiental
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>ambientMaterial</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>color</span>); <span style=color:#75715e>// Material con el color de la comida
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>translate</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>box</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>size</span>); <span style=color:#75715e>// Renderizar un cubo con el tamaño de la comida
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><h3 id=archivo-sketchjs>Archivo Sketch.js
<a class=anchor href=#archivo-sketchjs>#</a></h3><p>El archivo <code>sketch.js</code> contiene el código principal del juego de la serpiente en 3D implementado con la biblioteca <code>p5.js</code>.</p><p>En la parte superior del archivo, se declaran las variables y objetos necesarios para el juego, como la serpiente (snake), la comida (food), el tamaño de los bloques (blockSize), etc. También se cargan los archivos de música y efectos de sonido mediante la función preload().</p><p>La función <code>setup()</code> se encarga de configurar el lienzo y otras configuraciones iniciales. Aquí se crea el lienzo de juego en 3D, se establece el modo de ángulo en grados, se cargan las fuentes y se establece el tamaño y la alineación del texto. También se configura un gesto de deslizamiento (swipe) utilizando la biblioteca Hammer.js para permitir el control táctil del juego en dispositivos móviles. Además, se crea un botón de audio para habilitar/desactivar el sonido del juego.</p><p>La función <code>restartGame()</code> reinicia el juego, restableciendo las variables y objetos del juego a sus valores iniciales.</p><p>La función <code>draw()</code> dibuja el fondo, establece la cámara y la iluminación, dibuja el plano, muestra el puntaje, actualiza y renderiza la serpiente y la comida, y verifica si el juego ha terminado.</p><p>La función <code>keyPressed()</code> se activa cuando se presiona una tecla o se realiza un gesto de deslizamiento. Dependiendo de la tecla presionada o el gesto realizado, se mueve la serpiente en la dirección correspondiente y se reproduce el efecto de sonido correspondiente.</p><p>La función <code>createFood()</code> se encarga de crear un nuevo objeto de comida en una posición aleatoria dentro del plano de juego. Se asegura de que la comida no esté generada dentro del cuerpo de la serpiente y la ajusta a una cuadrícula para que se alinee correctamente.</p><p>La función <code>checkGameOver()</code> verifica si el juego ha terminado. Comprueba si la cabeza de la serpiente ha chocado contra los límites del plano de juego o su propio cuerpo. Si el juego ha terminado, se detiene la serpiente, se detiene la música de fondo y se muestra un mensaje de fin de juego en la pantalla.</p><p>La función <code>mousePressed()</code> se activa cuando se hace clic en la pantalla. Si el juego ha terminado, reinicia el juego cuando se hace clic en la pantalla.</p><p>La función <code>toggleAudio()</code> se activa cuando se hace clic en el botón de audio. Controla la reproducción y pausa de la música de fondo y actualiza la imagen del botón de audio.</p><h3 id=archivo-snakejs>Archivo Snake.js
<a class=anchor href=#archivo-snakejs>#</a></h3><p>Contiene la definición de la clase Snake. Esta clase representa la serpiente en el juego y tiene varias propiedades y métodos para controlar su comportamiento.</p><p>Estas propiedades incluyen el cuerpo de la serpiente, el tamaño de cada segmento del cuerpo, el espaciado entre los segmentos, la dirección de movimiento, la lentitud de movimiento y una bandera para permitir o detener el movimiento.</p><p>Los métodos y funciones permiten mover la serpiente en diferentes direcciones (izquierda, derecha, arriba y abajo), obtener la longitud de la serpiente, hacer que la serpiente crezca, verificar si la serpiente ha comido, y verificar si la serpiente ha colisionado consigo misma. También hay métodos para detener el movimiento de la serpiente, actualizar su posición en función de la dirección y renderizarla en el lienzo del juego.</p><p>En el método <code>render()</code>, la serpiente se representa visualmente en el lienzo del juego. La cabeza de la serpiente se dibuja en color rojo, mientras que el resto del cuerpo se dibuja en color negro. Se utilizan primitivas 3D como <code>box()</code> para dibujar los segmentos del cuerpo de la serpiente.</p><h3 id=archivo-foodjs>Archivo Food.js
<a class=anchor href=#archivo-foodjs>#</a></h3><p>Contiene la definición de la clase Food, que representa la comida en el juego de la serpiente en 3D. Esta clase tiene propiedades como la posición (coordenadas x e y) y el tamaño de la comida.</p><p>La clase Food tiene métodos para actualizar y renderizar la comida en el lienzo del juego. En el método <code>render()</code>, la comida se dibuja como un cubo en el lienzo.</p><h2 id=conclusiones>Conclusiones
<a class=anchor href=#conclusiones>#</a></h2><p>La implementación del juego de la serpiente en 3D ha proporcionado varias observaciones importantes sobre el uso de gráficos tridimensionales y su aplicabilidad en juegos y aplicaciones interactivas. A continuación, se presentan las conclusiones obtenidas:</p><ol><li><p>La perspectiva 3D permite un mejor uso del espacio en pantalla. Al tener una vista en 3D, los objetos pueden ser posicionados y visualizados en diferentes planos y distancias, lo que agrega más desafío y estrategia al juego de la serpiente. Además, facilita la detección de colisiones y la interacción con los elementos del juego.</p></li><li><p>La implementación de gráficos 3D puede requerir un nivel de conocimiento y experiencia adicional en comparación con gráficos 2D. La manipulación de coordenadas tridimensionales, el cálculo de perspectivas y la representación adecuada de los objetos pueden ser más complejos.</p></li><li><p>La biblioteca <code>p5.js</code> proporciona una abstracción y una interfaz sencilla para trabajar con gráficos 3D. A través de sus funciones y métodos, se facilita la creación y manipulación de objetos en un espacio tridimensional. Esto permite a los desarrolladores aprovechar las ventajas del 3D sin la necesidad de conocer detalles técnicos complejos.</p></li></ol><h2 id=trabajo-futuro>Trabajo Futuro
<a class=anchor href=#trabajo-futuro>#</a></h2><p>A pesar de la implementación exitosa del juego de la serpiente en 3D, existen diversas áreas que podrían explorarse en trabajos futuros para mejorar y expandir aún más la experiencia del juego. A continuación, se presentan algunas posibles direcciones para futuras investigaciones y mejoras:</p><ol><li><p><strong>Mejoras en la jugabilidad:</strong> Se pueden implementar nuevas mecánicas de juego para aumentar el desafío y la diversión. Esto podría incluir elementos como obstáculos en movimiento, power-ups, niveles de dificultad ajustables, modos de juego adicionales, entre otros.</p></li><li><p><strong>Diseño de niveles y escenarios:</strong> Actualmente, el juego de la serpiente se desarrolla en un plano bidimensional. Una dirección interesante para el trabajo futuro sería la creación de niveles y escenarios en entornos tridimensionales.</p></li><li><p><strong>Mejoras visuales y gráficas:</strong> Aunque el juego de la serpiente en 3D ya cuenta con una representación visual atractiva, se podrían realizar mejoras adicionales en términos de efectos visuales, modelado de objetos y animaciones.</p></li><li><p><strong>Integración de interacción con dispositivos:</strong> Una posible área de trabajo futuro es la incorporación de interacción con dispositivos externos, como sensores de movimiento o realidad virtual. Esto permitiría a los jugadores controlar la serpiente mediante movimientos corporales o explorar el entorno tridimensional del juego de manera más inmersiva.</p></li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/49303ae4eea47ada65a206dac58bb76bf414ce0a title='Last modified by Johan15111 | June 7, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 7, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#juego-de-la-serpiente-en-3d>Juego de la Serpiente en 3D</a><ul><li><a href=#introducción>Introducción</a></li><li><a href=#antecedentes-y-trabajo-previo>Antecedentes y Trabajo Previo</a></li><li><a href=#juego-de-la-serpiente>Juego de la Serpiente</a></li><li><a href=#código-y-explicación>Código y Explicación</a><ul><li><a href=#archivo-sketchjs>Archivo Sketch.js</a></li><li><a href=#archivo-snakejs>Archivo Snake.js</a></li><li><a href=#archivo-foodjs>Archivo Food.js</a></li></ul></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#trabajo-futuro>Trabajo Futuro</a></li></ul></li></ul></nav></div></aside></main></body></html>